<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="InsaDao">


	

	<insert id="insertInsa">
		<![CDATA[
			INSERT INTO INSA (SABUN, NAME, REG_NO,
				HP, ID, PWD, ENG_NAME, PHONE, AGE, EMAIL,
				JOIN_GBN_CODE, SEX, ZIP, ADDR1, ADDR2, POS_GBN_CODE,
				DEPT_CODE, SALARY, GART_LEVEL, PUT_YN, MIL_YN, 
				MIL_TYPE, MIL_LEVEL, MIL_STARTDATE, MIL_ENDDATE,
				KOSA_REG_YN, KOSA_CLASS_CODE, JOIN_DAY, RETIRE_DAY, 
				CMP_REG_NO, CRM_NAME, CMP_REG_IMAGE, CARRIER_IMAGE, 
				PROFILE_IMAGE, SELF_INTRO)
			VALUES(#{sabun}, #{name}, #{reg_no}, #{hp}, #{id}, #{pwd},
				#{eng_name}, #{phone}, #{age}, #{email}, #{join_gbn_code},
				#{sex}, #{zip}, #{addr1}, #{addr2}, #{pos_gbn_code}, 
				#{dept_code}, #{salary}, #{gart_level}, #{put_yn},
				#{mil_yn}, #{mil_type}, #{mil_level}, #{mil_startdate},
				#{mil_enddate}, #{kosa_reg_yn}, #{kosa_class_code}, 
				#{join_day}, #{retire_day}, #{cmp_reg_no}, #{crm_name},
				#{cmp_reg_image}, #{carrier_image}, #{profile_image},
				#{self_intro})			
		]]>
	</insert>

	<select id="getMaxSabun" resultType="int">
		<![CDATA[
			SELECT NVL(MAX(SABUN), 100000) + 1
			FROM INSA
		]]>	
	</select>
	
	<select id="checkId" resultType="insa">
		<![CDATA[
			SELECT * FROM INSA
			WHERE ID = #{id}
		]]>
	</select>


	<select id="getInsaCnt" resultType="int">
		<![CDATA[
			SELECT COUNT(*)	FROM INSA
			WHERE 1 = 1
		]]>
			<if test="sabun != ''">
				AND SABUN LIKE '%'||#{sabun}||'%'
			</if>
			<if test="name != ''">
				AND name LIKE '%'||#{name}||'%'
			</if>
			<if test="join_yn != ''">
				AND join_yn = #{join_yn}
			</if>
			<if test="put_yn != ''">
				AND put_yn = #{put_yn}
			</if>
			<if test="pos_gbn_code != ''">
				AND POS_GBN_CODE = #{pos_gbn_code}
			</if>
			<if test="join_day != ''">
				AND JOIN_DAY = #{join_day}
			</if>
			<if test="retire_day != ''">
				AND RETIRE_DAY = #{retire_day}
			</if>
			<if test="join_gbn_code != ''">
				AND JOIN_GBN_CODE = #{join_gbn_code}
			</if>
		<![CDATA[
			ORDER BY SABUN
		]]>
	</select>
	
	
	<select id="getInsaList" resultType="insa">
		<![CDATA[
			SELECT SABUN, NAME, REG_NO, HP,
				POS_GBN_CODE, JOIN_DAY, RETIRE_DAY,
				PUT_YN, SALARY
			FROM INSA
			WHERE 1 = 1
		]]>
			<if test="sabun != ''">
				AND SABUN LIKE '%'||#{sabun}||'%'
			</if>
			<if test="name != ''">
				AND name LIKE '%'||#{name}||'%'
			</if>
			<if test="join_yn != ''">
				AND join_yn = #{join_yn}
			</if>
			<if test="put_yn != ''">
				AND put_yn = #{put_yn}
			</if>
			<if test="pos_gbn_code != ''">
				AND POS_GBN_CODE = #{pos_gbn_code}
			</if>
			<if test="join_day != ''">
				AND JOIN_DAY = #{join_day}
			</if>
			<if test="retire_day != ''">
				AND RETIRE_DAY = #{retire_day}
			</if>
			<if test="join_gbn_code != ''">
				AND JOIN_GBN_CODE = #{join_gbn_code}
			</if>
		<![CDATA[
			ORDER BY SABUN
		]]>
	</select>
	
</mapper>